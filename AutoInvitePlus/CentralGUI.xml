<Ui xmlns="http://www.blizzard.com/wow/ui" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!-- CentralGUI XML Template Definitions -->
  <!-- The main frame is created dynamically in CentralGUI.lua -->

  <!-- Tree Row Template -->
  <Button name="AIPTreeRowTemplate" virtual="true">
    <Size>
      <AbsDimension x="250" y="20"/>
    </Size>
    <Layers>
      <Layer level="BACKGROUND">
        <Texture name="$parentHighlight" setAllPoints="true" alphaMode="ADD">
          <Color r="1" g="1" b="1" a="0.1"/>
        </Texture>
      </Layer>
    </Layers>
    <Scripts>
      <OnEnter>
        self.Highlight:Show()
      </OnEnter>
      <OnLeave>
        if not self.selected then
          self.Highlight:Hide()
        end
      </OnLeave>
    </Scripts>
  </Button>

  <!-- Inspection Panel Template -->
  <Frame name="AIPInspectionPanelTemplate" virtual="true">
    <Size>
      <AbsDimension x="400" y="500"/>
    </Size>
    <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="4" right="4" top="4" bottom="4"/>
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="16"/>
      </TileSize>
      <EdgeSize>
        <AbsValue val="16"/>
      </EdgeSize>
      <Color r="0.05" g="0.05" b="0.05" a="0.9"/>
    </Backdrop>
  </Frame>

  <!-- Player Row Template (for Queue/Blacklist) -->
  <Frame name="AIPPlayerRowTemplate" virtual="true">
    <Size>
      <AbsDimension x="600" y="22"/>
    </Size>
    <Frames>
      <Button name="$parentInviteBtn" inherits="UIPanelButtonTemplate">
        <Size>
          <AbsDimension x="35" y="18"/>
        </Size>
        <Anchors>
          <Anchor point="LEFT">
            <Offset>
              <AbsDimension x="0" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>
    </Frames>
  </Frame>

  <!-- Tab Button Template (custom, not inheriting CharacterFrameTabButtonTemplate for WotLK compat) -->
  <Button name="AIPTabButtonTemplate" virtual="true">
    <Size>
      <AbsDimension x="90" y="24"/>
    </Size>
    <Layers>
      <Layer level="BACKGROUND">
        <Texture name="$parentBg" setAllPoints="true">
          <Color r="0.15" g="0.15" b="0.15" a="0.9"/>
        </Texture>
      </Layer>
      <Layer level="OVERLAY">
        <FontString name="$parentText" inherits="GameFontNormalSmall">
          <Anchors>
            <Anchor point="CENTER"/>
          </Anchors>
        </FontString>
      </Layer>
    </Layers>
    <Scripts>
      <OnClick>
        if AutoInvitePlus.CentralGUI then
          AutoInvitePlus.CentralGUI.SelectTab(self.tabId)
        end
      </OnClick>
    </Scripts>
  </Button>

  <!-- Action Button Bar Template -->
  <Frame name="AIPActionBarTemplate" virtual="true">
    <Size>
      <AbsDimension x="640" y="40"/>
    </Size>
    <Frames>
      <Button name="$parentWhisper" inherits="UIPanelButtonTemplate" text="Whisper">
        <Size>
          <AbsDimension x="80" y="24"/>
        </Size>
        <Anchors>
          <Anchor point="LEFT">
            <Offset>
              <AbsDimension x="5" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>
      <Button name="$parentInvite" inherits="UIPanelButtonTemplate" text="Invite">
        <Size>
          <AbsDimension x="80" y="24"/>
        </Size>
        <Anchors>
          <Anchor point="LEFT" relativeTo="$parentWhisper" relativePoint="RIGHT">
            <Offset>
              <AbsDimension x="5" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>
      <Button name="$parentQueue" inherits="UIPanelButtonTemplate" text="Add to Queue">
        <Size>
          <AbsDimension x="100" y="24"/>
        </Size>
        <Anchors>
          <Anchor point="LEFT" relativeTo="$parentInvite" relativePoint="RIGHT">
            <Offset>
              <AbsDimension x="5" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>
      <Button name="$parentBlacklist" inherits="UIPanelButtonTemplate" text="Add to Blacklist">
        <Size>
          <AbsDimension x="110" y="24"/>
        </Size>
        <Anchors>
          <Anchor point="LEFT" relativeTo="$parentQueue" relativePoint="RIGHT">
            <Offset>
              <AbsDimension x="5" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>
    </Frames>
  </Frame>

  <!-- Status Bar Template -->
  <Frame name="AIPStatusBarTemplate" virtual="true">
    <Size>
      <AbsDimension x="980" y="30"/>
    </Size>
    <Layers>
      <Layer level="BACKGROUND">
        <Texture setAllPoints="true">
          <Color r="0" g="0" b="0" a="0.3"/>
        </Texture>
      </Layer>
      <Layer level="OVERLAY">
        <FontString name="$parentText" inherits="GameFontNormalSmall">
          <Anchors>
            <Anchor point="LEFT">
              <Offset>
                <AbsDimension x="10" y="0"/>
              </Offset>
            </Anchor>
          </Anchors>
          <Color r="0.7" g="0.7" b="0.7"/>
        </FontString>
      </Layer>
    </Layers>
  </Frame>

  <!-- Helper script for GUI initialization -->
  <Script>
    -- CentralGUI helper functions
    function AIP_ToggleCentralGUI()
      if AutoInvitePlus.CentralGUI then
        AutoInvitePlus.CentralGUI.Toggle()
      end
    end

    function AIP_ShowLFMTab()
      if AutoInvitePlus.CentralGUI then
        AutoInvitePlus.CentralGUI.Show("lfm")
      end
    end

    function AIP_ShowLFGTab()
      if AutoInvitePlus.CentralGUI then
        AutoInvitePlus.CentralGUI.Show("lfg")
      end
    end
  </Script>

</Ui>
